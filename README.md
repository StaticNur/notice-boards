# notice-boards (движок форума/доски объявлений)
### Test assignment for internship at Greenatom 14.04.2024

## Technologies
- Java 21
- Spring Boot 3.2.4
- Spring data jpa
- Spring validation
- Spring Security
- Swagger UI
- H2 in-memory DB
- Data migration using flyway
- JWT
- Lombok
- JUnit 5
- Maven

## Инструкция по запуску
1. Точка запуска сервиса: ```src/main/java/com/greenatom/noticeboards/NoticeBoardsApplication.java```

## Endpoints находится тут:

#### GET http://localhost:8080/swagger-ui.html

`Swagger UI` Прямо там можете отправлять запросы и получать ответы.


## Структура базы данных

### Все таблицы в схеме `FORUM_ENGINE_DATA`

### `TOPICS`

| Колонка   | Тип                      | Комментарий                                             |
|-----------|--------------------------|---------------------------------------------------------|
| id        | UUID                     | Уникальный идентификатор топика, первичный ключ         |
| name      | varchar(255)             | Название заголовки темы (топика)                        |
| created   | TIMESTAMP WITH TIME ZONE | Дата и Время создания топика, DEFAULT CURRENT_TIMESTAMP |

### `MESSAGES`

| Колонка   | Тип                      | Комментарий                                                |
|-----------|--------------------------|------------------------------------------------------------|
| id        | UUID                     | Уникальный идентификатор топика, первичный ключ            |
| text      | TEXT                     | Содержимое сообщения                                       |
| author    | VARCHAR(255)             | Имя автора сообщения                                       |
| created   | TIMESTAMP WITH TIME ZONE | Дата и Время создания сообщения, DEFAULT CURRENT_TIMESTAMP |
| topic_id  | UUID                     | Внешний ключ, связь с топиком                              |

### `USERS`

| Колонка  | Тип                      | Комментарий                                                    |
|----------|--------------------------|----------------------------------------------------------------|
| id       | BIGINT                   | Уникальный идентификатор топика, первичный ключ AUTO_INCREMENT |
| username | TEXT                     | Логин (Имя) учетной записи                                     |
| password | VARCHAR(255)             | Пароль учетной записи                                          |
| active   | BOOLEAN                  | Учетная записи активно(true/false)                             |
| role     | VARCHAR(64)              | Роль пользователя ADMIN / USER                                 |
| created  | TIMESTAMP WITH TIME ZONE | Дата и Время регистрации, DEFAULT CURRENT_TIMESTAMP            |

### Данные миграции (только USERS, т.к. пароль в скрипте закодирован):
#### Зарегистрированныe пользователи:
1) username = Nick, password = psw1, active = TRUE, role = ADMIN, created = CURRENT_TIMESTAMP
2) username = Tramp, password = psw2, active = TRUE, role = USER, created = CURRENT_TIMESTAMP
3) username = Pushkin, password = psw3, active = TRUE, role = USER, created = CURRENT_TIMESTAMP
#### Остальные данные миграции можете посмотреть скриптах `src/main/resources/db/migration`

## Тестовое задание Java

#### Требуется создать простейший движок форума/доски объявлений (только backend).
#### Суть задачи:
1) Есть топики (темы), в каждом топике может быть одно или более сообщений.
2) Движок должен обеспечивать хранение в БД (IMDB) и CRUD операции с топиками (темами) и сообщениями в топиках.
3) Топик должен содержать заголовок (название темы). 
4) Топик не может быть пустым, т.е. должен содержать как минимум одно сообщение.
5) Сообщение должно содержать имя (ник) автора, текст сообщения, дату создания.
6) Сообщение обязательно должно относиться к одному из топиков.

Необходимо реализовать клиентский REST-API позволяющий пользователю:
- получать список топиков
- получать сообщения в указанном топике
- создать топик (с первым сообщением в нем)
- создать сообщение в указанном топике
- отредактировать свое сообщение
- удалить свое сообщение

****Язык**** – Java (Spring или Spring Boot - по желанию)

****Автоматизация сборки**** – Maven (Gradle)

****Хранилище**** – in-memory DB (скрипт по наполнению тестовыми данными приветствуется)


#### Задания на дополнительный бал
1) Реализовать пагинацию для топиков и сообщений
2) Реализовать аутентификацию пользователей (т.е. для доступа к сервису необходимо сперва залогиниться)
3) Реализовать REST-API администратора. Администратор может редактировать и удалять любые сообщения и топики.
